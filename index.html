


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.1">
    
    
      
        <title>odsclient</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.a676eddb.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#odsclient" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="." title="odsclient" class="md-header-nav__button md-logo" aria-label="odsclient">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            odsclient
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Home
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/smarie/python-odsclient/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="odsclient" class="md-nav__button md-logo" aria-label="odsclient">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    odsclient
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/smarie/python-odsclient/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Home
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="." title="Home" class="md-nav__link md-nav__link--active">
      Home
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing" class="md-nav__link">
    Installing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-basics" class="md-nav__link">
    1. Basics
  </a>
  
    <nav class="md-nav" aria-label="1. Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-downloading-a-flat-dataset" class="md-nav__link">
    a- Downloading a "flat" dataset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-using-another-ods-platform" class="md-nav__link">
    b- Using another ODS platform
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-declaring-an-api-key" class="md-nav__link">
    c- Declaring an API key
  </a>
  
    <nav class="md-nav" aria-label="c- Declaring an API key">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicit-temporary" class="md-nav__link">
    explicit, temporary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive" class="md-nav__link">
    interactive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permanent" class="md-nav__link">
    permanent
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-advanced" class="md-nav__link">
    2. Advanced
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-features-benefits" class="md-nav__link">
    Main features / benefits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    See Also
  </a>
  
    <nav class="md-nav" aria-label="See Also">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#others" class="md-nav__link">
    Others
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#want-to-contribute" class="md-nav__link">
    Want to contribute ?
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="odskey/" title="odskey command" class="md-nav__link">
      odskey command
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="api_reference/" title="API reference" class="md-nav__link">
      API reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing" class="md-nav__link">
    Installing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-basics" class="md-nav__link">
    1. Basics
  </a>
  
    <nav class="md-nav" aria-label="1. Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-downloading-a-flat-dataset" class="md-nav__link">
    a- Downloading a "flat" dataset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-using-another-ods-platform" class="md-nav__link">
    b- Using another ODS platform
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-declaring-an-api-key" class="md-nav__link">
    c- Declaring an API key
  </a>
  
    <nav class="md-nav" aria-label="c- Declaring an API key">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explicit-temporary" class="md-nav__link">
    explicit, temporary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive" class="md-nav__link">
    interactive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permanent" class="md-nav__link">
    permanent
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-advanced" class="md-nav__link">
    2. Advanced
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-features-benefits" class="md-nav__link">
    Main features / benefits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    See Also
  </a>
  
    <nav class="md-nav" aria-label="See Also">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#others" class="md-nav__link">
    Others
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#want-to-contribute" class="md-nav__link">
    Want to contribute ?
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/smarie/python-odsclient/edit/master/docs/index.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                <h1 id="odsclient">odsclient<a class="headerlink" href="#odsclient" title="Permanent link">&para;</a></h1>
<p><em>A nonofficial client for OpenDataSoft API.</em></p>
<p><a href="https://pypi.python.org/pypi/odsclient/"><img alt="Python versions" src="https://img.shields.io/pypi/pyversions/odsclient.svg" /></a> <a href="https://travis-ci.org/smarie/python-odsclient"><img alt="Build Status" src="https://travis-ci.org/smarie/python-odsclient.svg?branch=master" /></a> <a href="https://smarie.github.io/python-odsclient/junit/report.html"><img alt="Tests Status" src="https://smarie.github.io/python-odsclient/junit/junit-badge.svg?dummy=8484744" /></a> <a href="https://codecov.io/gh/smarie/python-odsclient"><img alt="codecov" src="https://codecov.io/gh/smarie/python-odsclient/branch/master/graph/badge.svg" /></a></p>
<p><a href="https://smarie.github.io/python-odsclient/"><img alt="Documentation" src="https://img.shields.io/badge/doc-latest-blue.svg" /></a> <a href="https://pypi.python.org/pypi/odsclient/"><img alt="PyPI" src="https://img.shields.io/pypi/v/odsclient.svg" /></a> <a href="https://pepy.tech/project/odsclient"><img alt="Downloads" src="https://pepy.tech/badge/odsclient" /></a> <a href="https://pepy.tech/project/odsclient"><img alt="Downloads per week" src="https://pepy.tech/badge/odsclient/week" /></a> <a href="https://github.com/smarie/python-odsclient/stargazers"><img alt="GitHub stars" src="https://img.shields.io/github/stars/smarie/python-odsclient.svg" /></a></p>
<p><code>odsclient</code> provides a minimal set of functions to grab a dataset or a collection of datasets from an OpenDataSoft (ODS) platform. </p>
<p>Its initial purpose is not to cover the <a href="https://help.opendatasoft.com/en/apis/">full set of APIs available</a> but to get a minimum viable set of features to work easily with the datasets.</p>
<h2 id="installing">Installing<a class="headerlink" href="#installing" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code>&gt; pip install odsclient
</code></pre></div>


<p>If you wish to download datasets as dataframes, you should also install <code>pandas</code>. This is not mandatory, though.</p>
<p>Finally, if you plan to use api keys, we recommend that you install <code>keyring</code> as it will help you store the critical api keys in your operating system's password vault.</p>
<div class="codehilite"><pre><span></span><code>&gt; pip install keyring
</code></pre></div>


<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<h3 id="1-basics">1. Basics<a class="headerlink" href="#1-basics" title="Permanent link">&para;</a></h3>
<h4 id="a-downloading-a-flat-dataset">a- Downloading a "flat" dataset<a class="headerlink" href="#a-downloading-a-flat-dataset" title="Permanent link">&para;</a></h4>
<p>The most basic thing that you can do is to download a whole dataset, similarly to what you can get when clicking on the links with your browser on a dataset's <a href="https://public.opendatasoft.com/explore/dataset/world-growth-since-the-industrial-revolution0/export/">"Export" page</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">odsclient</span> <span class="kn">import</span> <span class="n">get_whole_dataset</span>

<span class="n">csv_str</span> <span class="o">=</span> <span class="n">get_whole_dataset</span><span class="p">(</span><span class="s2">&quot;world-growth-since-the-industrial-revolution0&quot;</span><span class="p">,</span> 
                            <span class="n">platform_id</span><span class="o">=</span><span class="s1">&#39;public&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">csv_str</span><span class="p">)</span>
</code></pre></div>


<p>yields</p>
<div class="codehilite"><pre><span></span><code><span class="err">Year Ending;World output;World population;Per capita output</span>
<span class="err">2012-12-31;3.03783837;1.39292748;1.62231324</span>
<span class="err">1700-12-31;0.07352168;0.05783974;0.01567288</span>
<span class="err">1820-12-31;0.51654477;0.44594248;0.07028884</span>
<span class="err">1913-12-31;1.48929571;0.58556427;0.89847031</span>
</code></pre></div>


<p>If you have <code>pandas</code> installed, you can get the dataset directly as a dataframe:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">odsclient</span> <span class="kn">import</span> <span class="n">get_whole_dataframe</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">get_whole_dataframe</span><span class="p">(</span><span class="s2">&quot;world-growth-since-the-industrial-revolution0&quot;</span><span class="p">,</span> 
                         <span class="n">platform_id</span><span class="o">=</span><span class="s1">&#39;public&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>


<p>yields</p>
<div class="codehilite"><pre><span></span><code><span class="err">  Year Ending  World output  World population  Per capita output</span>
<span class="err">0  1820-12-31      0.516545          0.445942           0.070289</span>
<span class="err">1  1913-12-31      1.489296          0.585564           0.898470</span>
<span class="err">2  2012-12-31      3.037838          1.392927           1.622313</span>
<span class="err">3  1700-12-31      0.073522          0.057840           0.015673</span>
</code></pre></div>


<h4 id="b-using-another-ods-platform">b- Using another ODS platform<a class="headerlink" href="#b-using-another-ods-platform" title="Permanent link">&para;</a></h4>
<p>By default the base url used to access the OpenDataSoft platform is <code>https://&lt;platform_id&gt;.opendatasoft.com</code>, with <code>platform_id='public'</code>. In the methods above, you can change either the platform id with <code>platform_id=...</code> if your target ODS platform has a standard host name, or the entire base url with <code>base_url=...</code>.</p>
<p>If you wish to check the result without executing the method, you can create an <code>ODSClient</code> object with the same parameters and inspect its <code>&lt;client&gt;.base_url</code> :</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">odsclient</span> <span class="kn">import</span> <span class="n">ODSClient</span>

<span class="n">default_client</span> <span class="o">=</span> <span class="n">ODSClient</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Default:               </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">default_client</span><span class="o">.</span><span class="n">base_url</span><span class="p">)</span>

<span class="n">client_with_custom_pfid</span> <span class="o">=</span> <span class="n">ODSClient</span><span class="p">(</span><span class="n">platform_id</span><span class="o">=</span><span class="s1">&#39;my_ods&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Custom `platform_id`:  </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">client_with_custom_pfid</span><span class="o">.</span><span class="n">base_url</span><span class="p">)</span>

<span class="n">client_with_custom_baseurl</span> <span class="o">=</span> <span class="n">ODSClient</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://my_ods_server.com/&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Custom `base_url`:     </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">client_with_custom_baseurl</span><span class="o">.</span><span class="n">base_url</span><span class="p">)</span>
</code></pre></div>


<p>yields</p>
<div class="codehilite"><pre><span></span><code><span class="k">Default</span><span class="p">:</span>               <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">public</span><span class="p">.</span><span class="n">opendatasoft</span><span class="p">.</span><span class="n">com</span>
<span class="n">Custom</span> <span class="ss">`platform_id`</span><span class="p">:</span>  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">my_ods</span><span class="p">.</span><span class="n">opendatasoft</span><span class="p">.</span><span class="n">com</span>
<span class="n">Custom</span> <span class="ss">`base_url`</span><span class="p">:</span>     <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">my_ods_server</span><span class="p">.</span><span class="n">com</span>
</code></pre></div>


<p>Note that any trailing slash is automatically removed from custom base urls.</p>
<h4 id="c-declaring-an-api-key">c- Declaring an API key<a class="headerlink" href="#c-declaring-an-api-key" title="Permanent link">&para;</a></h4>
<p>Most ODS servers require some sort of authentication to access some of their contents. <code>odsclient</code> supports authentication through API keys (see <a href="https://help.opendatasoft.com/en/apis/">ODS API Documentation</a>). There are several ways that you can use to specify an api key to use for your ODS interactions.</p>
<h5 id="explicit-temporary">explicit, temporary<a class="headerlink" href="#explicit-temporary" title="Permanent link">&para;</a></h5>
<p>If your need is a "quick and dirty" test, you can use direct <code>apikey=...</code> argument passing. This is the <strong>most insecure</strong> way of all, since your code will contain the key as a readable string. It should only be used as a temporary workaround, and should never be committed with the source code.</p>
<div class="codehilite"><pre><span></span><code><span class="n">csv_str</span> <span class="o">=</span> <span class="n">get_whole_dataset</span><span class="p">(</span><span class="s2">&quot;world-growth-since-the-industrial-revolution0&quot;</span><span class="p">,</span> 
                            <span class="n">apikey</span><span class="o">=</span><span class="s2">&quot;my_non_working_api_key&quot;</span><span class="p">)</span>
</code></pre></div>


<h5 id="interactive">interactive<a class="headerlink" href="#interactive" title="Permanent link">&para;</a></h5>
<p>If your application tolerates user interaction through the terminal, you can make the above more secure by using <a href="https://docs.python.org/3/library/getpass.html"><code>getpass()</code></a> so that users are prompted for the api key at runtime:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">getpass</span> <span class="kn">import</span> <span class="n">getpass</span>
<span class="n">csv_str</span> <span class="o">=</span> <span class="n">get_whole_dataset</span><span class="p">(</span><span class="s2">&quot;world-growth-since-the-industrial-revolution0&quot;</span><span class="p">,</span> 
                            <span class="n">apikey</span><span class="o">=</span><span class="n">getpass</span><span class="p">())</span>
</code></pre></div>


<h5 id="permanent">permanent<a class="headerlink" href="#permanent" title="Permanent link">&para;</a></h5>
<p>In all other cases, we recommend that you write apikey-agnostic code such as the one below:</p>
<div class="codehilite"><pre><span></span><code><span class="n">csv_str</span> <span class="o">=</span> <span class="n">get_whole_dataset</span><span class="p">(</span><span class="s2">&quot;world-growth-since-the-industrial-revolution0&quot;</span><span class="p">)</span>
</code></pre></div>


<p>In that case, <code>odsclient</code> will try several strategies to find an api key:</p>
<ul>
<li>
<p>first it will look for an <code>ods.apikey</code> text file containing the api key. The file should obviously not be committed with the source code (use <code>.gitignore</code> !). This is not the most secure solution, as malicious programs on your computer may have access to the file, and moreover you may commit it by accident (human error prone). You can override the default file path with the <code>apikey_filepath=...</code> argument.</p>
</li>
<li>
<p>then if <code>keyring</code> is installed (<code>pip install keyring</code>), it will check if there is an entry in it for service <code>&lt;base_url&gt;</code> and username <code>'apikey_user'</code>. <code>keyring</code> leverages your OS' vault (<a href="https://keyring.readthedocs.io/en/latest/?badge=latest#what-is-python-keyring-lib">Windows Credential Locker, macOS Keychain, Ubuntu SecretService, GNOME Keyring, etc.</a>). <strong>This is the most secure method available, it is therefore highly recommended</strong>. You can override the default keyring entry username with the <code>keyring_entries_username=...</code> argument. You can easily add or remove an entry in the keyring with the <a href="odskey/"><code>odskeys</code> commandline utility</a>, through the OS interface, or with the <code>store_apikey_in_keyring</code> / <code>get_apikey_from_keyring</code> / <code>remove_apikey_from_keyring</code> python API provided in <code>odsclient</code>.</p>
</li>
<li>
<p>finally it looks for an <code>ODS_APIKEY</code> OS environment variable. This environment variable should either contain a single api key without quotes (e.g. <code>aef46reohln48</code>), or a dict-like structure where keys can either be <code>&lt;platform_id&gt;</code>, <code>&lt;base_url&gt;</code>, or the special fallback key <code>'default'</code> (e.g. <code>{'public': 'key2', 'https://myods.com': 'key3', 'default': 'key1'}</code>). This method is not the most secure solution because malicious programs can access the OS environment variables ; however it should be preferred over the file-based method as it is not human error-prone. Besides it can be handy for continuous integration jobs.</p>
</li>
</ul>
<p>If you wish to <strong>force</strong> usage of an api key (and prevent any ODS query to be made if none is found), you may wish to set <code>enforce_apikey=True</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">csv_str</span> <span class="o">=</span> <span class="n">get_whole_dataset</span><span class="p">(</span><span class="s2">&quot;world-growth-since-the-industrial-revolution0&quot;</span><span class="p">,</span>
                            <span class="n">enforce_apikey</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># raise if no apikey is found</span>
                            <span class="p">)</span>
</code></pre></div>


<p>If no api key is found, the above yields:</p>
<div class="codehilite"><pre><span></span><code><span class="n">odsclient</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">NoODSAPIKeyFoundError</span><span class="p">:</span> <span class="n">ODS</span> <span class="n">API</span> <span class="k">key</span> <span class="n">file</span> <span class="k">not</span> <span class="n">found</span><span class="p">,</span> <span class="k">while</span> <span class="n">it</span> <span class="k">is</span> 
    <span class="n">marked</span> <span class="k">as</span> <span class="n">mandatory</span> <span class="k">for</span> <span class="n">this</span> <span class="k">call</span> <span class="p">(</span><span class="ss">`enforce_apikey=True`</span><span class="p">).</span> <span class="n">It</span> <span class="n">should</span> <span class="n">either</span> 
    <span class="n">be</span> <span class="n">put</span> <span class="k">in</span> <span class="n">a</span> <span class="kt">text</span> <span class="n">file</span> <span class="n">at</span> <span class="n">path</span> <span class="s1">&#39;ods.apikey&#39;</span><span class="p">,</span> <span class="k">or</span> <span class="k">in</span> <span class="n">the</span> <span class="ss">`ODS_APIKEY`</span> <span class="n">OS</span> 
    <span class="n">environment</span> <span class="n">variable</span><span class="p">,</span> <span class="k">or</span> <span class="p">(</span><span class="n">recommended</span><span class="p">,</span> <span class="n">most</span> <span class="n">secure</span><span class="p">)</span> <span class="k">in</span> <span class="n">the</span> <span class="n">local</span> <span class="ss">`keyring`</span><span class="p">.</span>
    <span class="n">See</span> <span class="n">documentation</span> <span class="k">for</span> <span class="n">details</span><span class="p">:</span> 
    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">smarie</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">python</span><span class="o">-</span><span class="n">odsclient</span><span class="o">/</span><span class="c1">#c-declaring-an-api-key. </span>
    <span class="n">Note</span> <span class="n">that</span> <span class="n">you</span> <span class="n">can</span> <span class="n">generate</span> <span class="n">an</span> <span class="n">API</span> <span class="k">key</span> <span class="k">on</span> <span class="n">this</span> <span class="n">web</span> <span class="n">page</span><span class="p">:</span> <span class="p">[...].</span>
</code></pre></div>


<p>This can be handy if you wish your users to see a quick help at first call reminding them on the various ways to provide an api key.</p>
<p>Finally, for debugging purposes, you may wish to use <code>get_apikey()</code> to check if the api key that is actually used is the one you think you have configured (through a file, env variable, or keyring):</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">odsclient</span> <span class="kn">import</span> <span class="n">get_apikey</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;api key used: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">get_apikey</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://my_ods_server.com/&quot;</span><span class="p">))</span>
</code></pre></div>


<p>See <a href="api_reference/">API reference</a> for details.</p>
<h3 id="2-advanced">2. Advanced<a class="headerlink" href="#2-advanced" title="Permanent link">&para;</a></h3>
<p><strong>TODO</strong></p>
<h2 id="main-features-benefits">Main features / benefits<a class="headerlink" href="#main-features-benefits" title="Permanent link">&para;</a></h2>
<ul>
<li>Simple access to ODS API to retrive a whole dataset as text (csv) or dataframe</li>
<li>Support for many methods to define an api key, independently of the source code: different users may use different methods (env variable, api key file, keyring) while using the same odsclient code.</li>
</ul>
<h2 id="see-also">See Also<a class="headerlink" href="#see-also" title="Permanent link">&para;</a></h2>
<p>This library was inspired by:</p>
<ul>
<li><a href="https://smarie.github.io/python-azureml-client/"><code>azmlclient</code></a></li>
<li><a href="https://pypi.org/project/keyring/"><code>keyring</code></a></li>
<li>Work in progress: using KeePass as a <code>keyring</code> backend. <a href="https://github.com/brettviren/python-keepass">Here</a> and <a href="https://github.com/jaraco/keyring/issues/14">here</a></li>
</ul>
<h3 id="others">Others<a class="headerlink" href="#others" title="Permanent link">&para;</a></h3>
<p><em>Do you like this library ? You might also like <a href="https://github.com/smarie/OVERVIEW#python">my other python libraries</a></em> </p>
<h2 id="want-to-contribute">Want to contribute ?<a class="headerlink" href="#want-to-contribute" title="Permanent link">&para;</a></h2>
<p>Details on the github page: <a href="https://github.com/smarie/python-odsclient">https://github.com/smarie/python-odsclient</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
        
          <a href="odskey/" title="odskey command" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                odskey command
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.c51dfa35.min.js"></script>
      <script src="assets/javascripts/bundle.eaaa3931.min.js"></script><script id="__lang" type="application/json">{"search.config.lang": "en", "search.result.none": "No matching documents", "clipboard.copied": "Copied to clipboard", "search.config.separator": "[\\s\\-]+", "clipboard.copy": "Copy to clipboard", "search.result.placeholder": "Type to start searching", "search.result.other": "# matching documents", "search.result.one": "1 matching document", "search.config.pipeline": "trimmer, stopWordFilter"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>